<div class="isometrica-meetings" isa-guidance="guidance/meetings">
  <isa-meetings-header></isa-meetings-header>
  <isa-guidance-view type="bar"></isa-guidance-view>
  <div class="container bootcards-container isometrica-container-listdetail" id="main">
    <div class="row">

      <div class="col-sm-4 bootcards-list" id="list">
        <div class="panel panel-default">
          <div class="panel-body">
            <div class="search-form">
              <div class="row">
                <div class="col-xs-8">
                  <div class="form-group">
                    <input type="text" class="form-control" ng-model="query" placeholder="Search Meetings...">
                    <i class="fa fa-search"></i>
                  </div>
                </div>
                <div class="col-xs-4">
                  <button ng-disabled="vm.filter == 'deleted'" class="btn btn-primary btn-block" ng-click="vm.addMeeting()">
                    <i class="fa fa-plus"></i>
                    <span>Add</span>
                  </button>
                </div>
              </div>

            </div>
          </div>
          <div class="list-group" ng-if="vm.filter != 'type'">
            <a class="list-group-item" ng-repeat="mtg in vm.meetings | filter:query"
               ui-sref=".meeting({mtgId: mtg._id})" ui-sref-active="active">
              <span isa-meeting-status="mtg" class="pull-left"></span>
              <div class="list-group-item-content">
                <h4 class="list-group-item-heading">{{mtg.type}}</h4>
                <p class="list-group-item-text">{{mtg.date | isaDate}},
                  <ng-pluralize count="vm.actionCounts[mtg._id]"
                                when="{'0': 'no actions', '1': '1 action', 'other': '{} actions'}"></ng-pluralize>

                </p>
              </div>
            </a>
          </div>

          <div class="list-group bootcards-accordion" ng-if="vm.filter == 'type'">
            <div ng-repeat="section in vm.sections | orderBy:section.type">
              <a class="list-group-item bootcards-list-subheading"
                 ng-class="{'collapsed' : section.isCollapsed || section.meetings.length==0, 'no-collapse' : !section.meetings.length}"
                 ng-click="section.isCollapsed = !section.isCollapsed">
                <h4 class="list-group-item-heading">{{section.type}}</h4>
              </a>

              <div class="children" ng-if="section.meetings.length>0" collapse="section.isCollapsed">
                <a class="list-group-item" ng-repeat="mtg in section.meetings | filter:query"
                   ui-sref=".meeting({mtgId: mtg._id})" ui-sref-active="active">
                  <span isa-meeting-status="mtg" class="pull-left"></span>
                  <h5 class="list-group-item-heading">{{mtg.date | isaDate}},
                    <ng-pluralize count="vm.actionCounts[mtg._id]"
                                  when="{'0': 'no actions', '1': '1 action', 'other': '{} actions'}"></ng-pluralize>

                  </h5>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-8 bootcards-cards hidden-xs">
        <ui-view>
          <h4 style="text-align: center;">No {{vm.filter == 'deleted' ? 'deleted' : 'recent or scheduled'}} meetings to display</h4>
        </ui-view>
      </div>
    </div>
  </div>
</div>
