<!-- Business Impact Analysis Part 1 -->
<div class="resilify-canvas-modal" id="businessImpact1Modal" tabindex="-1" role="dialog">
    <div class="modal-content">
      <form name="aopForm" schema="WorkbookActivity" schema-doc="vm.activity">
      <div class="modal-header clearfix">
        <div class="btn-group pull-left">
          <button type="button" class="btn btn-danger btn-back" ng-click="vm.cancel()">
            Cancel
          </button>
        </div>
        <div class="btn-group pull-right">
          <button ng-disabled="!aopForm.$valid" type="button" class="btn btn-success" ng-click="vm.save(aopForm)">
            Save
          </button>
        </div>
        <h4 class="modal-title">BIA part 1</h4>
      </div>
      <div class="modal-header subheader">
        <span class="text-muted">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eu justo condi mentum, tristique mi eget, volutpat ante.</span>
      </div>
      <div class="modal-body">
        <div class="form-horizontal">
          <schema-form model="vm.activity" fields="name" template-options='{
            "name": {
              "labelClass": "col-sm-4",
              "inputClass": "col-sm-8"
            }
          }'>
          </schema-form>
        </div>
      </div>
      <div class="modal-body" ng-if="!vm.isNew">
        <h4 class="resilify-canvas-modal-subheading text-center">Individual Impact Analysis</h4>
        <accordion>
          <accordion-group ng-repeat="impact in vm.activity.impacts track by $index">
            <accordion-heading>
              <i class="pull-left fa isa-chevron" ng-class="{
                  'fa-chevron-circle-right': !isOpen,
                  'fa-chevron-circle-down': isOpen
                }" ng-click="isOpen = !isOpen"></i>
            {{impact.name}} impacts of disruption
            </accordion-heading>
            <div class="panel-body resilify-impacts" style="margin: -15px">
              <isa-impact-grid title="{{impact.name}} impacts" values="impact.values"></isa-impact-grid>
              <div ng-repeat="mitigation in impact.mitigations track by $index">
                <h4 class="resilify-impacts-subheading">Mitigated by {{mitigation.name}}</h4>
                <isa-impact-grid title="Mitigated by {{mitigation.name}}" values="mitigation.values"></isa-impact-grid>
              </div>
              <div class="panel-footer text-center">
                <button type="button" class="btn btn-primary" ng-click="vm.addMitigation(impact)">
                  <i class="fa fa-plus"></i>
                  Add a Mitigation Opportunity
                </button>
              </div>
            </div>
          </accordion-group>
        </accordion>

        <div class="text-center">
          <button type="button" class="btn btn-primary add-type" ng-click="vm.addImpactType()">
            <i class="fa fa-plus"></i>
            Add an Impacts type
          </button>
        </div>
      </div>
      <div class="modal-body overall-analysis">
        <h4 class="resilify-canvas-modal-subheading text-center">Overall analysis</h4>
        <div class="form-horizontal">
          <schema-form model="vm.activity" fields="mtpdDays,rtoDays"></schema-form>

          <div class="form-group">
            <i class="fa fa-question-circle resilify-canvas-modal-help-icon"></i>
            <label class="control-label col-sm-3">
              IT system
            </label>
            <div class="col-sm-6">
              <input type="text" class="form-control" placeholder="IT system name"/>
            </div>
            <div class="col-sm-3">
              <input type="number" class="form-control" placeholder="RPO"/>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-9 col-sm-offset-3">
              <button type="button" class="btn btn-primary">
                <i class="fa fa-plus"></i>
                Add an IT system
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer" ng-if="!vm.isNew">
        <button type="button" class="btn btn-danger">
          Delete
        </button>
      </div>
      </form>
    </div>
</div>
