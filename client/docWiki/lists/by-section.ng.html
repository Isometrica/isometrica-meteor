<div ng-repeat="page in docsBySection | filter : {inTrash:false} | draftFilter:isOwner:isEditor | filter : query">

	<a 
	class="list-group-item bootcards-list-subheading has-content"
	ng-class="{'collapsed' : page.isCollapsed || page.children.length==0, 'no-collapse' : !page.hasChildren}"
	ng-click="toggleSectionCat(page);"
	ui-sref=".page( { pageId : page._id} )"
	ui-sref-active="active">

		<h4 class="list-group-item-heading"
			ng-class="{'text-danger': page.isDraft}">{{page | pageTitleFilter}}</h4>
		
	</a>
	
	<div class="children" ng-if="page.children.length>0" collapse="page.isCollapsed">

		<a 
			ng-repeat="child in page.children | draftFilter:isOwner:isEditor | filter : query"
			class="list-group-item"
			ui-sref=".page({ pageId : child._id})"
			ui-sref-active="active">

			<!--ng-class="{'subsection' : isSubsection(child)-->

			<h4 class="list-group-item-heading"
				ng-class="{'text-danger': child.isDraft}">{{ child | pageTitleFilter}}</h4>

		</a>

	</div>

</div>

<div class="list-group-item" style="margin-left: 20px; border-top:0;" ng-if="pages.length==0">
	No pages created yet (<a ng-click="editPage()" style="display:inline; padding:0">create first</a>)
</div>
