<div>
  <div class="modal-header">
    <button type="button" class="close" ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <h4 class="modal-title" ng-if="isNew">Add a module</h4>
    <h4 class="modal-title" ng-if="!isNew">Edit module settings</h4>
  </div>
  <div class="modal-body">
    <form name="moduleForm">
        <div class="form-group" isa-has-error input-name="title">
          <label class="control-label" for="inputTitle">Title *</label>
          <input
            autofocus
            type="text"
            id="inputTitle"
            class="form-control"
            name="title"
            ng-model="module.title"
            required="true"
            placeholder="Enter a title"/>
        </div>
      <div class="form-group">
        <label class="control-label" for="inputType">Type *</label>
        <select class="form-control" id="inputType" ng-model="module.type" ng-disabled="!isNew" ng-required="true">
            <option value=""></option>
            <option value="docwiki">DocumentWiki</option>
            <option value="dashboard">Core System (V6 Design)</option>
            <option value="addressbook">Address Book</option>
            <option value="workbook">BCM Workbook</option>
        </select>
      </div>
      <div class="form-group" ng-show="isNew && module.type == 'docwiki'">
        <label class="control-label" for="inputType">Template</label>
        <select
            class="form-control" id="inputType"
            ng-model="module.templateId"
            ng-options="template.id as template.title for template in selectedOrganisation.modules">
            <option value="">- No template- </option>
        </select>
      </div>
      <div class="form-group" isa-has-error input-name="org">
          <label class="control-label" for="inputTitle">Organisation *</label>
          <input class="form-control"
            type="text"
            name="org"
            ng-disabled="!isNew"
            ng-model="selectedOrganisation"
            typeahead-editable="false"
            required="true"
            placeholder="Find an organisation"
            typeahead="org as org.name for org in findOrganisations($viewValue)"/>
      </div>
      <div class="form-group">
        <label class="control-label" for="inputDescription">Description</label>
        <textarea id="inputDescription" class="form-control"
          ng-model="module.description" placeholder="Enter a description"></textarea>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-danger pull-left" ng-click="delete()" ng-if="!isNew && !module.inTrash">
      <i class="fa fa-times"></i>Delete module
    </button>
      <button type="button" class="btn btn-warning pull-left" ng-click="restore()" ng-if="!isNew && module.inTrash">
          <i class="fa fa-reply"></i>Restore module
      </button>
    <button type="button" class="btn btn-link" ng-click="cancel()">
      Cancel
    </button>
    <button type="button" ng-click="save()" ng-disabled="!moduleForm.$valid" class="btn btn-primary">
      <i class="fa fa-check"></i>
      <span ng-if="isNew">Add module</span>
      <span ng-if="!isNew">Update settings</span>
    </button>
  </div>
</div>
