<div class="modal-content">

	<isa-address-book-modal-header
		can-save="userForm.$valid"
		on-save="save()"
		on-cancel="cancel()"
		title="Edit User">
	</isa-address-book-modal-header>

	<div class="modal-body">
		<form
			novalidate
			name="userForm"
			schema="UserProfile"
			class="form-horizontal"
			schema-doc="object.profile">
			<isa-loading-fieldset loading="loading">
				<div class="form-group">
					<label class="control-label col-xs-4">Photo</label>
					<div class="col-xs-8">
						<img class="img-circle" src="img/avatar-mark.gif">
						<button type="button" class="btn btn-default">Change</button>
					</div>
				</div>
				<schema-form model="object.profile" fields="fullName,role"></schema-form>
				<div
					class="form-group"
					ng-repeat="phoneNumber in object.profile.phoneNumbers"
					ng-init="numberInput = 'number' + $index; typeInput = 'type' + $index">
					<label class="control-label col-xs-4">
						Phone number
					</label>
					<div class="col-xs-5" ng-class="{
						'has-error':
							userForm[numberInput].$touched &&
							userForm[numberInput].$invalid
					}">
						<input
							required
							type="text"
							ng-model="phoneNumber.number"
							name="{{ numberInput }}"
							class="form-control"
							placeholder="Number"/>
					</div>
					<div class="col-xs-3" ng-class="{
						'has-error':
							userForm[typeInput].$touched &&
							userForm[typeInput].$invalid
					}">
						<select ng-model="phoneNumber.type" required name="{{ typeInput }}" class="form-control">
							<option>Work</option>
							<option>Home</option>
							<option>Mobile</option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<div class="col-xs-8 col-xs-offset-4">
						<button
							ng-click="addPhoneNumber()"
							type="button"
							class="btn btn-link">
							Add another phone number
						</button>
					</div>
				</div>
				<schema-form model="object.profile" fields="address,city,state,postcode,country"></schema-form>
			</isa-loading-fieldset>
		</form>
	</div>

</div>
